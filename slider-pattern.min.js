!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["slider-pattern"]=e():t["slider-pattern"]=e()}(window,function(){return i=[function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sliderInit=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=i(1),s=(l=l)&&l.__esModule?l:{default:l},u=i(2);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h="slider",d=h+"--initialized",m=(a(p,[{key:"init",value:function(){this.defineVariables(),this.setCurrentBreakpoint(),this.setLang(),this.setEventListeners(),this.el.classList.add(d),this.setAriaDefaults(),this.setInitialValues(),this.fillSlider(),this.setToggleAccessible(this.maxHandler),this.updateLabelPosition()}},{key:"defineVariables",value:function(){this.oneBasedIndex=this.ref+1,this.elId=h+"-"+this.oneBasedIndex,this.minHandler=this.el.querySelector("."+h+"__min-handler"),this.maxHandler=this.el.querySelector("."+h+"__max-handler"),this.minInput=this.el.querySelector("."+h+"__min-input"),this.maxInput=this.el.querySelector("."+h+"__max-input"),this.inputs=this.el.querySelectorAll("."+h+"__input"),this.minHandlerLabel=this.el.querySelector("."+h+"__handler-min-label"),this.maxHandlerLabel=this.el.querySelector("."+h+"__handler-max-label"),this.minHandlerLabelSpan=this.el.querySelector(".min-cost"),this.maxHandlerLabelSpan=this.el.querySelector(".max-cost"),this.maxHandlerLabelDiv=this.el.querySelector(".max-label-div"),this.minHandlerLabelDiv=this.el.querySelector(".min-label-div"),this.minInputLabel=this.el.querySelector(".slider__input-min-label"),this.maxInputLabel=this.el.querySelector(".slider__input-max-label"),this.minInputLabelSpan=this.el.querySelector(".min-input-label"),this.maxInputLabelSpan=this.el.querySelector(".max-input-label"),this.dataMinValue=this.el.getAttribute("data-min"),this.dataMaxValue=this.el.getAttribute("data-max"),this.dataInitialMinValue=this.el.getAttribute("data-initial-min-value")||null,this.dataInitialMaxValue=this.el.getAttribute("data-initial-max-value")||null,this.minError=this.el.querySelector(".min-error"),this.maxError=this.el.querySelector(".max-error"),this.lang="",this.sliderWidth=this.el.offsetWidth,this.sliderOutputContainer=this.el.querySelector("."+h+"__output-container"),this.sliderColor="#878F9B",this.rangeColor="#003B71",this.ds2LayoutBreakpoint=394,this.currentDS2Breakpoint="mobile",this.shouldMoveLabels=!1}},{key:"setLang",value:function(){var t=document.querySelector("html");this.lang=this.el.getAttribute("data-lang")||t.getAttribute("lang"),"en"!==this.lang&&"es"!==this.lang&&(this.lang="en"),this.renderLangData()}},{key:"renderLangData",value:function(){var t=s.default.lang[this.lang].example;this.el.setAttribute("aria-label",t)}},{key:"setEventListeners",value:function(){var e=this;window.addEventListener("resize",this.onDocumentResize.bind(this)),this.minHandler.addEventListener("click",this.controlminHandler.bind(this)),this.maxHandler.addEventListener("click",this.controlmaxHandler.bind(this)),this.inputs.forEach(function(t){return t.addEventListener("keydown",e.onInputKeydown.bind(e))}),this.inputs.forEach(function(t){return t.addEventListener("keyup",e.onInputKeyUp.bind(e))}),this.minHandler.addEventListener("input",this.controlminHandler.bind(this)),this.maxHandler.addEventListener("input",this.controlmaxHandler.bind(this))}},{key:"setAriaDefaults",value:function(){this.el.setAttribute("id",this.elId),this.minInput.setAttribute("id",this.elId+"__minInput"),this.minInputLabel.setAttribute("for",this.elId+"__minInput"),this.maxInput.setAttribute("id",this.elId+"__maxInput"),this.maxInputLabel.setAttribute("for",this.elId+"__maxInput"),this.minHandler.setAttribute("id",this.elId+"__minHandler"),this.minHandlerLabel.setAttribute("for",this.elId+"__minHandler"),this.maxHandler.setAttribute("id",this.elId+"__maxHandler"),this.maxHandlerLabel.setAttribute("for",this.elId+"__maxHandler"),this.minError.setAttribute("id",this.minInput.id+"__error"),this.maxError.setAttribute("id",this.maxInput.id+"__error")}},{key:"setInitialValues",value:function(){var e=this;this.maximum=parseInt(this.dataMaxValue),this.minimum=parseInt(this.dataMinValue),this.minimumInitial=parseInt(this.dataMinValue),this.maximumInitial=parseInt(this.dataMaxValue),this.dataInitialMaxValue&&(this.maximumInitial=parseInt(this.dataInitialMaxValue)),this.dataInitialMinValue&&(this.minimumInitial=parseInt(this.dataInitialMinValue)),this.minHandler.value=this.minimumInitial,this.minHandler.min=this.minimum,this.minHandler.max=this.maximum,this.maxHandler.value=this.maximumInitial,this.maxHandler.min=this.minimum,this.maxHandler.max=this.maximum,this.minInput.value=this.minimumInitial,this.minInput.min=this.minimum,this.minInput.max=this.maximum,this.maxInput.value=this.maximumInitial,this.maxInput.min=this.minimum,this.maxInput.max=this.maximum,this.minInputLabelSpan.innerText=this.minimum,this.maxInputLabelSpan.innerText=this.maximum,this.minHandlerLabelSpan.innerText=this.minimumInitial,this.maxHandlerLabelSpan.innerText=this.maximumInitial,this.inputs.forEach(function(t){return e.applyInputMask(t)})}},{key:"onInputKeyUp",value:function(t){8===(t.which||t.keyCode)&&this.preventErasingSymbol(t)}},{key:"onInputKeydown",value:function(t){var e=this;switch(t.which||t.keyCode){case 8:return t.target.value.length<2?(this.resetSlider(t),void this.applyInputMask(t.target)):void 0;case 9:return;default:setTimeout(function(){t.target===e.minInput?e.controlminInput(t):e.controlmaxInput(t)},0)}}},{key:"applyInputMask",value:function(t){var e=t.value;t.value="$"+e}},{key:"preventErasingSymbol",value:function(t){var e=t.target.value;e.startsWith("$")||(t.target.value="$"+e)}},{key:"resetSlider",value:function(t){t.target===this.minInput?(this.minHandler.value=0,this.minInput.value="$",this.minHandlerLabelSpan.innerText=0):(this.maxHandler.value=0,this.maxInput.value="$",this.maxHandlerLabelSpan.innerText=0,this.setToggleAccessible(this.minHandler)),this.fillSlider(),this.updateLabelPosition("max"),this.updateLabelPosition("min")}},{key:"controlminInput",value:function(t){var e=parseFloat(this.minInput.value.replace(/[^0-9]/g,""));parseFloat(this.maxInput.value.replace(/[^0-9]/g,""))<e?this.showError(t,this.minInput.id):(""===this.minInput.value?this.resetSlider(t):(this.minHandler.value=e,this.minInput.value="$"+e,this.minHandlerLabelSpan.innerText=e,this.hideError(t,this.minInput.id),this.fillSlider()),this.updateLabelPosition("min"),this.checkInput(t),e>this.maximum&&(this.showError(t,this.minInput.id),this.resetSlider(t)))}},{key:"controlmaxInput",value:function(t){var e=parseInt(this.minInput.value.replace(/[^0-9]/g,"")),i=parseInt(this.maxInput.value.replace(/[^0-9]/g,""));if(this.setToggleAccessible(this.maxInput),e<=i)this.maxHandler.value=i,this.maxHandlerLabelSpan.innerText=i,this.maxInput.value="$"+i,this.fillSlider(),this.hideError(t,this.maxInput.id);else{if(""!==this.maxInput.value)return isNaN(i)||(this.maxInput.value="$"+i),void this.showError(t,this.maxInput.id);this.resetSlider(t)}this.updateLabelPosition("max"),this.checkInput(t),i>this.maximum&&(this.showError(t,t.target.id),this.resetSlider(t))}},{key:"controlminHandler",value:function(t){var e=parseInt(this.minHandler.value),i=parseInt(this.maxHandler.value);this.fillSlider(),e<i?(this.minInput.value=e,this.minHandlerLabelSpan.innerText=e,this.hideError(t,this.minInput.id)):(this.minInput.value=i,this.minHandler.value=i,this.minHandlerLabelSpan.innerText=this.minInput.value),this.applyInputMask(this.minInput),this.updateLabelPosition("min")}},{key:"controlmaxHandler",value:function(t){var e=parseInt(this.minHandler.value),i=parseInt(this.maxHandler.value);this.fillSlider(),this.setToggleAccessible(this.maxHandler),e<=i?(this.maxHandler.value=i,this.maxInput.value=i,this.maxHandlerLabelSpan.innerText=i,this.hideError(t,this.maxInput.id)):(this.maxInput.value=e,this.maxHandler.value=e,this.maxHandlerLabelSpan.innerText=this.maxInput.value),this.updateLabelPosition("max"),this.applyInputMask(this.maxInput)}},{key:"hideError",value:function(t,e){e=this.el.querySelector("#"+e+"__error");"text"===t.target.type?(t.target.classList.remove("error-field"),e.innerHTML=""):"range"===t.target.type&&((t.target.classList.contains("slider__min-handler")?this.minInput:this.maxInput).classList.remove("error-field"),e.innerHTML="")}},{key:"showError",value:function(t,e){var i=this.el.querySelector("#"+e+"__error"),n="error-description-"+e;"text"===t.target.type?(t.target.classList.add("error-field"),i.innerHTML="<ul id='"+n+"' role='presentation'><li><span class='inline-error-icon' aria-hidden='true'>!</span><span class='screenreader-only'>Error: </span>message for  "+e+" </li></ul>"):"range"===t.target.type&&((t.target.classList.contains("slider__min-handler")?this.minInput:this.maxInput).classList.add("error-field"),i.innerHTML="<ul id='"+n+"' role='presentation'><li><span class='inline-error-icon' aria-hidden='true'>!</span><span class='screenreader-only'>Error: </span>message for  "+e+" </li></ul>")}},{key:"checkInput",value:function(t){var e=t.target.value,i=t.target.id;/^(?:\$)?\d+(\.\d+)?$/.test(e)?(this.hideError(t,i),this.applyInputMask(t)):(this.showError(t,i),this.resetSlider(t))}},{key:"updateLabelPosition",value:function(t){var e=this.maxHandler.max-this.maxHandler.min,i=this.minHandler.value-this.maxHandler.min,n=this.maxHandler.value-this.maxHandler.min,a=100*this.sliderOutputContainer.offsetWidth/this.sliderWidth,i=i/e*100,n=n/e*100;this.shouldMoveLabels?(t||(this.maxHandlerLabelDiv.style.left=n-3+"%",this.minHandlerLabelDiv.style.left=i+"%"),"max"===t?a<n-i&&n<100-a&&(this.maxHandlerLabelDiv.style.left=n+"%"):a<n-i&&i<100-2*a&&(this.minHandlerLabelDiv.style.left=i+"%")):(this.maxHandlerLabelDiv.style.left=100-a+"%",this.minHandlerLabelDiv.style.left="0%")}},{key:"fillSlider",value:function(){var t=this.maxHandler.max-this.maxHandler.min,e=this.minHandler.value-this.maxHandler.min,i=this.maxHandler.value-this.maxHandler.min;this.maxHandler.style.background="linear-gradient(\n        to right,\n        "+this.sliderColor+" 0%,\n        "+this.sliderColor+" "+e/t*100+"%,\n        "+this.rangeColor+" "+e/t*100+"%,\n        "+this.rangeColor+" "+i/t*100+"%, \n        "+this.sliderColor+" "+i/t*100+"%, \n        "+this.sliderColor+" 100%)"}},{key:"setToggleAccessible",value:function(t){Number(t.value)<=0?this.maxHandler.style.zIndex=2:this.maxHandler.style.zIndex=0}},{key:"setCurrentBreakpoint",value:function(){var t=(0,u.getWindowWidth)();t>=this.ds2LayoutBreakpoint&&"tablet-up"!==this.currentDS2Breakpoint?(this.currentDS2Breakpoint="tablet-up",this.shouldMoveLabels=!0):t<=this.ds2LayoutBreakpoint&&"mobile"!==this.currentDS2Breakpoint&&(this.currentDS2Breakpoint="mobile",this.shouldMoveLabels=!1),console.log(this.shouldMoveLabels)}},{key:"onDocumentResize",value:function(){this.setCurrentBreakpoint(),this.updateLabelPosition("min"),this.updateLabelPosition("max")}}]),p);function p(t,e){if(o(this,p),"object"===(void 0===t?"undefined":n(t))&&null!==t){if(this.el=t,this.options=e||{},void 0!==t.dataset.ref)return p.ref[t.dataset.ref];this.ref=Object.keys(p.ref).length,t.dataset.ref=this.ref,(p.ref[this.ref]=this).init()}}m.ref={};a(f,[{key:"initAll",value:function(t){var e=this,i=void 0;if(void 0===t||""===t)i=document;else if(document.querySelector(t))i=document.querySelector(t);else if(null===document.querySelector(t))return;t=i.querySelectorAll("."+h+":not(."+d+")");t.length&&t.forEach(function(t){e.init(t)})}},{key:"init",value:function(t){return new m(t)}},{key:"get",value:function(t){var e;return isNaN(t)&&(e=document.querySelector(t))&&(t=e.dataset.ref),m.ref[t]}}]);var c=f;function f(t){o(this,f),this.initAll(t)}e.sliderInit=function(t){var e=window.$kp=window.$kp||{};e.PL=e.PL||{},e.PL.Slider=new c(t)}},function(t){t.exports=JSON.parse('{"lang":{"en":{"example":"Example text"},"es":{"example":"Texto de ejemplo"}}}')},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createElementFromHTML=function(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild},e.getWindowWidth=function(){var t=window,e=document.documentElement,i=e.getElementsByTagName("body")[0];return t.innerWidth||e.clientWidth||i.clientWidth}}],n={},a.m=i,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0);function a(t){var e;return(n[t]||(e=n[t]={i:t,l:!1,exports:{}},i[t].call(e.exports,e,e.exports,a),e.l=!0,e)).exports}var i,n});
//# sourceMappingURL=slider-pattern.min.js.map