!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["slider-pattern"]=t():e["slider-pattern"]=t()}(window,function(){return i=[function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sliderInit=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e};function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=i(1),s=(l=l)&&l.__esModule?l:{default:l},u=i(2);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h="slider",d=h+"--initialized",m=(a(p,[{key:"init",value:function(){this.defineVariables(),this.setCurrentBreakpoint(),this.setLang(),this.setInitialValues(),this.setEventListeners(),this.el.classList.add(d),this.setAriaDefaults(),this.fillSlider(),this.setToggleAccessible(this.maxHandler),this.updateLabelPosition()}},{key:"defineVariables",value:function(){this.oneBasedIndex=this.ref+1,this.elId=h+"-"+this.oneBasedIndex,this.minHandler=this.el.querySelector("."+h+"__min-handler"),this.maxHandler=this.el.querySelector("."+h+"__max-handler"),this.minInput=this.el.querySelector("."+h+"__min-input"),this.maxInput=this.el.querySelector("."+h+"__max-input"),this.inputs=this.el.querySelectorAll("."+h+"__input"),this.minHandlerLabel=this.el.querySelector("."+h+"__handler-min-label"),this.maxHandlerLabel=this.el.querySelector("."+h+"__handler-max-label"),this.minHandlerLabelSpan=this.el.querySelector(".min-cost"),this.maxHandlerLabelSpan=this.el.querySelector(".max-cost"),this.maxHandlerLabelDiv=this.el.querySelector(".max-label-div"),this.minHandlerLabelDiv=this.el.querySelector(".min-label-div"),this.minInputLabel=this.el.querySelector(".slider__input-min-label"),this.maxInputLabel=this.el.querySelector(".slider__input-max-label"),this.minInputLabelSpan=this.el.querySelector(".min-input-label"),this.maxInputLabelSpan=this.el.querySelector(".max-input-label"),this.dataMinValue=this.el.getAttribute("data-min"),this.dataMaxValue=this.el.getAttribute("data-max"),this.dataInitialMinValue=this.el.getAttribute("data-initial-min-value"),this.dataInitialMaxValue=this.el.getAttribute("data-initial-max-value"),this.minError=this.el.querySelector(".min-error"),this.maxError=this.el.querySelector(".max-error"),this.lang="",this.sliderWidth=this.el.offsetWidth,this.sliderOutputContainer=this.el.querySelector("."+h+"__output-container"),this.sliderColor="#878F9B",this.rangeColor="#003B71",this.ds2LayoutBreakpoint=394,this.currentDS2Breakpoint="mobile",this.shouldMoveLabels=!1}},{key:"setLang",value:function(){var e=document.querySelector("html");this.lang=this.el.getAttribute("data-lang")||e.getAttribute("lang"),"en"!==this.lang&&"es"!==this.lang&&(this.lang="en"),this.renderLangData()}},{key:"renderLangData",value:function(){var e=s.default.lang[this.lang].example;this.el.setAttribute("aria-label",e)}},{key:"setEventListeners",value:function(){var t=this;window.addEventListener("resize",this.onDocumentResize.bind(this)),this.minHandler.addEventListener("click",this.controlminHandler.bind(this)),this.maxHandler.addEventListener("click",this.controlmaxHandler.bind(this)),this.inputs.forEach(function(e){return e.addEventListener("keydown",t.onInputKeydown.bind(t))}),this.inputs.forEach(function(e){return e.addEventListener("keyup",t.onInputKeyUp.bind(t))}),this.minHandler.addEventListener("input",this.controlminHandler.bind(this)),this.maxHandler.addEventListener("input",this.controlmaxHandler.bind(this)),this.minHandler.addEventListener("touchstart",this.controlminHandler.bind(this)),this.maxHandler.addEventListener("touchstart",this.controlmaxHandler.bind(this))}},{key:"setAriaDefaults",value:function(){this.el.setAttribute("id",this.elId),this.minInput.setAttribute("id",this.elId+"__minInput"),this.minInputLabel.setAttribute("for",this.elId+"__minInput"),this.maxInput.setAttribute("id",this.elId+"__maxInput"),this.maxInputLabel.setAttribute("for",this.elId+"__maxInput"),this.minHandler.setAttribute("id",this.elId+"__minHandler"),this.minHandlerLabel.setAttribute("for",this.elId+"__minHandler"),this.maxHandler.setAttribute("id",this.elId+"__maxHandler"),this.maxHandlerLabel.setAttribute("for",this.elId+"__maxHandler"),this.minError.setAttribute("id",this.minInput.id+"__error"),this.maxError.setAttribute("id",this.maxInput.id+"__error")}},{key:"setInitialValues",value:function(){var t=this,e=parseInt(this.dataInitialMinValue),i=parseInt(this.dataInitialMaxValue);isNaN(e)&&(e=this.dataMinValue),isNaN(i)&&(i=this.dataMaxValue),this.minHandler.min=this.dataMinValue,this.minHandler.max=this.dataMaxValue,this.maxHandler.min=this.dataMinValue,this.maxHandler.max=this.dataMaxValue,this.minInput.value=e,this.minInput.min=this.dataMinValue,this.minInput.max=this.dataMaxValue,this.maxInput.value=i,this.maxInput.min=this.dataMinValue,this.maxInput.max=this.dataMaxValue,this.minHandler.value=e,this.maxHandler.value=i,this.minInputLabelSpan.innerText=this.dataMinValue,this.maxInputLabelSpan.innerText=this.dataMaxValue,this.minHandlerLabelSpan.innerText=e,this.maxHandlerLabelSpan.innerText=i,this.inputs.forEach(function(e){return t.applyInputMask(e)})}},{key:"onInputKeyUp",value:function(e){var t=this;switch(e.which||e.keyCode){case 8:return void this.preventErasingSymbol(e);case 9:return;default:setTimeout(function(){e.target===t.minInput?t.controlminInput(e):t.controlmaxInput(e)},0)}}},{key:"onInputKeydown",value:function(e){8===(e.which||e.keyCode)&&e.target.value.length<2&&(this.resetSlider(e),this.applyInputMask(e.target))}},{key:"applyInputMask",value:function(e){var t=e.value;e.value="$"+t}},{key:"preventErasingSymbol",value:function(e){var t=e.target.value;t.startsWith("$")||(e.target.value="$"+t)}},{key:"resetSlider",value:function(e){e.target===this.minInput?(this.minHandler.value=0,this.minInput.value="$",this.minHandlerLabelSpan.innerText=0):(this.maxHandler.value=0,this.maxInput.value="$",this.maxHandlerLabelSpan.innerText=0,this.setToggleAccessible(this.minHandler)),this.fillSlider(),this.updateLabelPosition("max"),this.updateLabelPosition("min")}},{key:"controlminInput",value:function(e){var t=parseFloat(this.minInput.value.replace(/[^0-9]/g,""));parseFloat(this.maxInput.value.replace(/[^0-9]/g,""))<t?this.showError(e,this.minInput.id):(""===this.minInput.value?this.resetSlider(e):(this.minHandler.value=t,this.minInput.value="$"+t,this.minHandlerLabelSpan.innerText=t,this.hideError(e,this.minInput.id),this.fillSlider()),this.updateLabelPosition("min"),this.checkInput(e),t>this.maximum&&(this.showError(e,this.minInput.id),this.resetSlider(e)))}},{key:"controlmaxInput",value:function(e){var t=parseInt(this.minInput.value.replace(/[^0-9]/g,"")),i=parseInt(this.maxInput.value.replace(/[^0-9]/g,""));if(this.setToggleAccessible(this.maxInput),t<=i)this.maxHandler.value=i,this.maxHandlerLabelSpan.innerText=i,this.maxInput.value="$"+i,this.fillSlider(),this.hideError(e,this.maxInput.id);else{if(""!==this.maxInput.value)return isNaN(i)||(this.maxInput.value="$"+i),void this.showError(e,this.maxInput.id);this.resetSlider(e)}this.updateLabelPosition("max"),this.checkInput(e),i>this.maximum&&(this.showError(e,e.target.id),this.resetSlider(e))}},{key:"controlminHandler",value:function(e){var t=parseInt(this.minHandler.value),i=parseInt(this.maxHandler.value);this.fillSlider(),t<i?(this.minInput.value=t,this.minHandlerLabelSpan.innerText=t,this.hideError(e,this.minInput.id)):(this.minInput.value=i,this.minHandler.value=i,this.minHandlerLabelSpan.innerText=this.minInput.value),this.applyInputMask(this.minInput),this.updateLabelPosition("min")}},{key:"controlmaxHandler",value:function(e){var t=parseInt(this.minHandler.value),i=parseInt(this.maxHandler.value);this.fillSlider(),this.setToggleAccessible(this.maxHandler),t<=i?(this.maxHandler.value=i,this.maxInput.value=i,this.maxHandlerLabelSpan.innerText=i,this.hideError(e,this.maxInput.id)):(this.maxInput.value=t,this.maxHandler.value=t,this.maxHandlerLabelSpan.innerText=this.maxInput.value),this.updateLabelPosition("max"),this.applyInputMask(this.maxInput)}},{key:"hideError",value:function(e,t){t=this.el.querySelector("#"+t+"__error");"text"===e.target.type?(e.target.classList.remove("error-field"),t.innerHTML=""):"range"===e.target.type&&((e.target.classList.contains("slider__min-handler")?this.minInput:this.maxInput).classList.remove("error-field"),t.innerHTML="")}},{key:"showError",value:function(e,t){var i=this.el.querySelector("#"+t+"__error"),n="error-description-"+t;"text"===e.target.type?(e.target.classList.add("error-field"),i.innerHTML="<ul id='"+n+"' role='presentation'><li><span class='inline-error-icon' aria-hidden='true'>!</span><span class='screenreader-only'>Error: </span>message for  "+t+" </li></ul>"):"range"===e.target.type&&((e.target.classList.contains("slider__min-handler")?this.minInput:this.maxInput).classList.add("error-field"),i.innerHTML="<ul id='"+n+"' role='presentation'><li><span class='inline-error-icon' aria-hidden='true'>!</span><span class='screenreader-only'>Error: </span>message for  "+t+" </li></ul>")}},{key:"checkInput",value:function(e){var t=e.target.value,i=e.target.id;/^(?:\$)?\d+(\.\d+)?$/.test(t)?(this.hideError(e,i),this.applyInputMask(e)):(this.showError(e,i),this.resetSlider(e))}},{key:"updateLabelPosition",value:function(e){var t=this.maxHandler.max-this.maxHandler.min,i=this.minHandler.value-this.maxHandler.min,n=this.maxHandler.value-this.maxHandler.min,a=100*this.sliderOutputContainer.offsetWidth/this.sliderWidth,i=i/t*100,n=n/t*100;this.shouldMoveLabels?(e||(this.maxHandlerLabelDiv.style.left=n-3+"%",this.minHandlerLabelDiv.style.left=i+"%"),"max"===e?a<n-i&&n<100-a&&(this.maxHandlerLabelDiv.style.left=n+"%"):a<n-i&&i<100-2*a&&(this.minHandlerLabelDiv.style.left=i+"%")):(this.maxHandlerLabelDiv.style.left=100-a+"%",this.minHandlerLabelDiv.style.left="0%")}},{key:"fillSlider",value:function(){var e=this.maxHandler.max-this.maxHandler.min,t=this.minHandler.value-this.maxHandler.min,i=this.maxHandler.value-this.maxHandler.min;this.maxHandler.style.background="linear-gradient(\n        to right,\n        "+this.sliderColor+" 0%,\n        "+this.sliderColor+" "+t/e*100+"%,\n        "+this.rangeColor+" "+t/e*100+"%,\n        "+this.rangeColor+" "+i/e*100+"%, \n        "+this.sliderColor+" "+i/e*100+"%, \n        "+this.sliderColor+" 100%)"}},{key:"setToggleAccessible",value:function(e){Number(e.value)<=0?this.maxHandler.style.zIndex=2:this.maxHandler.style.zIndex=0}},{key:"setCurrentBreakpoint",value:function(){var e=(0,u.getWindowWidth)();e>=this.ds2LayoutBreakpoint&&"tablet-up"!==this.currentDS2Breakpoint?(this.currentDS2Breakpoint="tablet-up",this.shouldMoveLabels=!0):e<=this.ds2LayoutBreakpoint&&"mobile"!==this.currentDS2Breakpoint&&(this.currentDS2Breakpoint="mobile",this.shouldMoveLabels=!1),console.log(this.shouldMoveLabels)}},{key:"onDocumentResize",value:function(){this.setCurrentBreakpoint(),this.updateLabelPosition("min"),this.updateLabelPosition("max")}}]),p);function p(e,t){if(o(this,p),"object"===(void 0===e?"undefined":n(e))&&null!==e){if(this.el=e,this.options=t||{},void 0!==e.dataset.ref)return p.ref[e.dataset.ref];this.ref=Object.keys(p.ref).length,e.dataset.ref=this.ref,(p.ref[this.ref]=this).init()}}m.ref={};a(f,[{key:"initAll",value:function(e){var t=this,i=void 0;if(void 0===e||""===e)i=document;else if(document.querySelector(e))i=document.querySelector(e);else if(null===document.querySelector(e))return;e=i.querySelectorAll("."+h+":not(."+d+")");e.length&&e.forEach(function(e){t.init(e)})}},{key:"init",value:function(e){return new m(e)}},{key:"get",value:function(e){var t;return isNaN(e)&&(t=document.querySelector(e))&&(e=t.dataset.ref),m.ref[e]}}]);var c=f;function f(e){o(this,f),this.initAll(e)}t.sliderInit=function(e){var t=window.$kp=window.$kp||{};t.PL=t.PL||{},t.PL.Slider=new c(e)}},function(e){e.exports=JSON.parse('{"lang":{"en":{"example":"Example text"},"es":{"example":"Texto de ejemplo"}}}')},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createElementFromHTML=function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},t.getWindowWidth=function(){var e=window,t=document.documentElement,i=t.getElementsByTagName("body")[0];return e.innerWidth||t.clientWidth||i.clientWidth}}],n={},a.m=i,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0);function a(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},i[e].call(t.exports,t,t.exports,a),t.l=!0,t)).exports}var i,n});
//# sourceMappingURL=slider-pattern.min.js.map